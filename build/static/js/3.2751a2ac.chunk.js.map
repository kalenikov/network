{"version":3,"sources":["components/hoc/WithAuthRedirect.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusHooks.js","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/ProfileInfo/ProfileStatus.js","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["withAuthRedirect","Component","RedirectComponent","this","props","isAuth","to","React","connect","state","auth","module","exports","ProfileStatusHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","onBlur","updateStatus","autoFocus","onChange","e","currentTarget","value","ProfileInfo","profile","className","s","descriptionBlock","src","photos","large","alt","Preloader","Post","item","message","maxLenght10","maxLenghtCreator","AddNewPostForm","onSubmit","handleSubmit","Field","name","component","Textarea","validate","required","placeholder","reduxForm","form","MyPosts","postElements","posts","map","i","key","id","createRef","postsBlock","values","addPost","newPostText","MyPostsContainer","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","match","params","authorizedUserId","history","push","getUserProfile","getStatus","compose","withRouter"],"mappings":"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","file":"static/js/3.2751a2ac.chunk.js","sourcesContent":["import React from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nexport const withAuthRedirect = Component => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) {\r\n                return <Redirect to={'/login'}/>\r\n            }\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    let mapStateToPropsRedirect = (state) => ({\r\n        isAuth: state.auth.isAuth\r\n    })\r\n    let ConnectedRedirectComponent = connect(mapStateToPropsRedirect)(RedirectComponent)\r\n\r\n    return ConnectedRedirectComponent\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__h8o1Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__2gmN_\",\"posts\":\"MyPosts_posts__3KBTd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__162NX\"};","import React, {Fragment, useEffect, useState} from 'react';\r\n\r\nconst ProfileStatusHooks = (props) => {\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(()=>{\r\n        setStatus(props.status)\r\n    },[props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatus(status)\r\n    }\r\n\r\n    const onStatusChange = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n                <span onDoubleClick={activateEditMode}>{props.status || '------'}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div>\r\n                <input\r\n                    onBlur={deactivateEditMode}\r\n                    autoFocus={true}\r\n                    onChange={onStatusChange}\r\n                    value={status}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default ProfileStatusHooks","import React from 'react';\r\nimport s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport ProfileStatusHooks from './ProfileStatusHooks'\r\nimport ProfileStatus from './ProfileStatus'\r\n\r\nconst ProfileInfo = ({profile, status, updateStatus}) => {\r\n    // debugger\r\n\r\n    if (!profile) {\r\n        return <Preloader/>\r\n    }\r\n\r\n    return <div>\r\n        <div className={s.descriptionBlock}>\r\n            <img src={profile.photos.large} alt={''}/>\r\n            <ProfileStatusHooks status={status} updateStatus={updateStatus}/>\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\nexport default ProfileInfo","import React, {Fragment} from 'react';\r\n\r\nclass ProfileStatus extends React.Component {\r\n\r\n    state = {\r\n        editMode: false,\r\n        status: this.props.status\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (!prevProps.status === this.props.status) {\r\n            this.setState({status: this.props.status})\r\n        }\r\n    }\r\n\r\n    activateEditMode = () => {\r\n        this.setState({editMode: true})\r\n    }\r\n\r\n    deactivateEditMode = () => {\r\n        this.setState({editMode: false})\r\n        this.props.updateStatus(this.state.status)\r\n    }\r\n\r\n    onStatusChange = (e) => {\r\n        this.setState({status: e.currentTarget.value})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                {!this.state.editMode &&\r\n                <div>\r\n                    <span onDoubleClick={this.activateEditMode}>{this.props.status || '------'}</span>\r\n                </div>\r\n                }\r\n                {this.state.editMode &&\r\n                <div>\r\n                    <input\r\n                        autoFocus={true}\r\n                        onBlur={this.deactivateEditMode}\r\n                        value={this.state.status}\r\n                        onChange={this.onStatusChange}/>\r\n                </div>\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProfileStatus","import React from 'react';\r\nimport s from './Post.module.css'\r\n\r\nconst Post = (props) => {\r\n    return <div className={s.item}>\r\n        <img src={'https://avatars.mds.yandex.net/get-pdb/1066918/2d75c329-6a10-4b4b-8d87-8303d2eeb4a1/s1200'}/>\r\n        {props.message}\r\n        <div>\r\n            <span>like</span>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Post","import React from 'react';\r\nimport s from './MyPosts.module.css'\r\nimport Post from \"./Post/Post\";\r\nimport {reduxForm, Field} from 'redux-form'\r\nimport {maxLenghtCreator, required} from '../../../utils/validators/validators'\r\nimport {Textarea} from '../../common/FormsControls/FormsControls'\r\n\r\nconst maxLenght10 = maxLenghtCreator(10)\r\n\r\nlet AddNewPostForm = props => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field\r\n                    name={'newPostText'}\r\n                    component={Textarea}\r\n                    validate={[required, maxLenght10]}\r\n                    placeholder={'Post message'}/>\r\n            </div>\r\n            <div>\r\n                <button>Add post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nAddNewPostForm = reduxForm({form: 'Profile'})(AddNewPostForm)\r\n\r\nconst MyPosts = (props) => {\r\n\r\n    let postElements = props.posts.map(i => <Post message={i.message} key={i.id}/>)\r\n\r\n    let newPostElement = React.createRef()\r\n\r\n    const onAddPost = (values) => {\r\n        props.addPost(values.newPostText)\r\n    }\r\n    return (\r\n        <div className={s.postsBlock}>\r\n            <h3>my posts</h3>\r\n\r\n            <AddNewPostForm onSubmit={onAddPost}/>\r\n\r\n            <div className={s.posts}>\r\n                {postElements}\r\n            </div>\r\n        </div>)\r\n}\r\n\r\n\r\nexport default MyPosts","import React from 'react';\r\nimport {addPostActionCreator, updateNewPostTextActionCreator} from '../../../redux/profile-reducer'\r\nimport MyPosts from './MyPosts'\r\nimport {connect} from 'react-redux'\r\n\r\nlet mapStateToProps = state => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = dispatch => {\r\n    return {\r\n        addPost: (newPostText) => dispatch(addPostActionCreator(newPostText))\r\n    }\r\n}\r\n\r\nlet MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\r\nexport default MyPostsContainer","import React from 'react';\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer'\r\n\r\nconst Profile = (props) => {\r\n    // debugger\r\n    return <div>\r\n        <ProfileInfo\r\n            profile={props.profile}\r\n            status={props.status}\r\n            updateStatus={props.updateStatus}/>\r\n        <MyPostsContainer/>\r\n    </div>\r\n\r\n}\r\n\r\nexport default Profile","import React from 'react';\r\nimport Profile from './Profile'\r\nimport {connect} from 'react-redux'\r\nimport {getStatus, getUserProfile, updateStatus} from '../../redux/profile-reducer'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {compose} from 'redux'\r\nimport {withAuthRedirect} from '../hoc/WithAuthRedirect'\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        let userId = this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId\r\n            if (!userId){\r\n                this.props.history.push('/login')\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId)\r\n        this.props.getStatus(userId)\r\n    }\r\n\r\n    render() {\r\n\r\n        return <div>\r\n            <Profile {...this.props}\r\n                     profile={this.props.profile}\r\n                     status={this.props.status}\r\n                     updateStatus={this.props.updateStatus}/>\r\n        </div>\r\n    }\r\n\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authorizedUserId: state.auth.userId,\r\n    isAuth: state.auth.isAuth,\r\n})\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {getUserProfile, getStatus, updateStatus}),\r\n    withRouter,\r\n    withAuthRedirect,\r\n)(ProfileContainer)"],"sourceRoot":""}